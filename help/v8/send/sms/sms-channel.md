---
title: SMS チャネルの特性
description: SMS チャネルの特性を学ぶ
feature: SMS
role: User
level: Intermediate
badge: label="限定提供（LA）" type="Informative"
source-git-commit: 36bb1e2c9e2391065360c3cd2ad97612373ec0c2
workflow-type: tm+mt
source-wordcount: '1365'
ht-degree: 23%

---


# SMS チャネルの特性 {#sms-channel}

>[!IMPORTANT]
>
>このドキュメントは、Adobe Campaign v8.7.2 以降を対象としています。
>
>古いバージョンについては、[Campaign Classic v7 ドキュメント ](https://experienceleague.adobe.com/en/docs/campaign-classic/using/sending-messages/sending-messages-on-mobiles/sms-protocol) を参照してください。


## SMS の種類 {#sms-types}

SMS プロバイダーを通じて SMS を送信する場合、3 種類の SMS が発生します。

* **SMS MT （モバイル終了）**:Adobe Campaignから SMPP プロバイダーを通じて携帯電話に送信される SMS です。
* **SMS MO （Mobile Originated）**：これは、SMPP プロバイダーを通じてAdobe Campaignに向けてモバイルから送信される SMS です。
* **SMS SR （ステータスレポート）または DR または DLR （配信確認）**：これは、SMS が正常に受信されたことを示す、SMPP プロバイダーを通じてモバイルからAdobe Campaignに送信される返信確認メッセージです。 Adobe Campaign は、メッセージが配信できなかったことを示す SR を受け取る場合もあります。多くの場合、エラーの説明が記載されています。

確認（RESP PDU、SMPP プロトコルの一部）と SR を区別する必要があります。 SR は、ネットワークのエンドツーエンドで送信される SMS の一種ですが、確認は、1 回の転送が成功したことを確認するだけです。

確認と SR はどちらもトリガーエラーが発生する可能性があるため、両者を区別するとトラブルシューティングに役立ちます。

### SMS で送信される情報  {#sms-info}

SMS は、テキストよりも多くの情報を伝送します。SMS によって提供される情報のリストを以下に示します。

* テキスト。140 バイトに制限されます。つまり、エンコーディングに応じて 70～160 文字の範囲です。詳細と制限については、[SMS テキストエンコーディング](#sms-text-encoding)を参照してください。
* 受信者アドレス。ADC または MSISDN と呼ばれることもあります（「電話番号」の技術名）。 SMS を受信する携帯電話の番号です。
* oADC と呼ばれることもあれば、送信者 ID と呼ばれることもあります。 電話番号（日々の使用）、ショートコード（プロバイダーを通じて送信される場合）、名前（これはオプション機能で、その場合 SMS に返信できません）を指定できます。
* メッセージがフラッシュメッセージかどうかを示すフラグ （フラッシュメッセージは、メモリに保存されていないポップアップです）
* SR が予想されるかどうかを示すフラグ。
* 有効期限。この期限を過ぎると、ネットワーク機器は再試行できません（常に存在するとは限りません）。
* テキストのエンコーディングを示す data_coding フィールド。

## SMS テキストエンコーディング {#sms-text-encoding}

>[!IMPORTANT]
>
>SMS のエンコーディングは、多くの落とし穴があり、準拠しない実装がある、広大で複雑なテーマです。

最初のルールは **エンコーディングの問題が発生した場合は、常に SMPP プロバイダーに問い合わせる** ことです。 サポートするエンコーディングに関する正確な知識と、技術的なプラットフォームの制限によって適用される可能性のある特別なルールを持っているユーザーのみ。 あなたがそれらを送信し、それらがあなたに送り返すものをチェックするようにしてください、それは成功し、安定した相互接続への唯一の道です。

SMS メッセージは、特殊な 7 ビットエンコーディングを使用します。通常、GSM7 エンコーディングと呼ばれます。  ウィキペディアには [ それについての良い記事（英語の GSM 03.38） ](https://en.wikipedia.org/wiki/GSM_03.38) があります。

SMPP プロトコルでは、トラブルシューティングを容易にするために、GSM7 のテキストが 1 文字あたり 8 ビットに拡張されます。SMSC は、携帯電話に送信される前に、1 文字あたり 7 ビットにパックします。つまり、SMS の short_message フィールドの長さは SMPP フレームで最大 160 バイトになりますが、モバイルネットワークで送信される場合は 140 バイトに制限されます（最上位ビットは単に破棄されます）。

エンコードの問題が発生した場合は、次の点を確認してください。
* 最初に、どの文字がどのエンコーディングに属するのかを把握しておくようにします。 GSM7 は、発音区別符号（アクセント）を部分的にサポートしていることで悪名高いです。 フランス語の場合、é と è が GSM7 に含まれますが、ê、â、ï は含まれません。スペイン語も同じです。
* セディーユ付きの C （ç）は、GSM7 アルファベットでは大文字のみ存在しますが、一部の機種では小文字または「スマート」文字で表示されます。一般的には、これを完全に避けてセディーユを削除する（フランス語ではそれでも非常に読みやすい）か、UCS-2 に切り替えることをお勧めします。
* **SMS で ASCII は使用しないでください。SMPP プロバイダーから明示的にリクエストされない限り、** を行います。このエンコーディングは、8 ビット文字で、GSM7 よりもカバー範囲が狭いので、容量を浪費します。 このエンコーディングは、CDMA ネットワーク （北アメリカで使用）で必要になる場合があります。
* Latin-1 は必ずしもサポートされているわけではありません。Latin-1 の使用を試みる前に、SMPP プロバイダーとの互換性を確認してください。
* 各国語シフトテーブルは、Adobe Campaign コネクタではサポートされていません。代わりに、UCS-2 またはその他の data_coding を使用する必要があります。
* UCS-2 と UTF-16 は、多くの場合、携帯電話で混在します。これは、絵文字や UCS-2 には存在しない、めったに使用されない文字を送信するユーザーにとって問題です。
* 唯一の古い電話には、すべての UCS-2 文字のフォントグリフがありません。 最近のスマートフォンは珍しい文字をかなり簡単に表示できる傾向があり、古いスマートフォンにはあまり絵文字が付いていないことが多く、非常に古いフィーチャーフォンは一般的に購入した国の母国語で役立つものに限ってサポートされています。 絵文字やアスキーアートを使う場合は、さまざまな電話でテストしてから送信してください。 キャンペーンプレビューでは、欠落しているグリフをシミュレートせず、web ブラウザーで使用可能な記号をすべて表示してプレビューを表示します。

*data_coding* フィールドは、使用されるエンコーディングを示します。 主な問題は、仕様で値 0 は *デフォルトの SMSC エンコーディング* を意味し、通常は GSM7 を意味しますが、常にそうであるとは限らないことです。 data_coding = 0 と関連付けられているエンコーディングを SMPP プロバイダーで確認します。 他の data_coding 値は仕様に従う傾向がありますが、確認する唯一の方法は SMPP プロバイダーに確認することです。

メッセージの最大サイズは、エンコーディングによって異なります。次の表に、すべての関連情報をまとめます。

| エンコード | 通常の data_coding | メッセージサイズ（文字） | マルチパート SMS のパーツサイズ | 使用可能な文字 |
|:-:|:-:|:-:|:-:|:-:|  
| GSM7 | 0 | 160 | 152 | GSM7 基本文字セット + 拡張文字（拡張文字は 2 文字） |
| Latin-1 | 3 | 140 | 134 | ISO-8859-1 |
| UCS-2 UTF-16 | 8 | 70 | 67 | Unicode（携帯電話によって異なります） |

## マルチパート SMS（長文 SMS） {#multipart-sms}

マルチパート SMS （多くの場合、ロング SMS と呼ばれます）は、複数の部分で送信される SMS です。 モバイルネットワークプロトコルの技術的な制限により、SMS は 140 バイトを超えることはできないので（SMS に収まる文字数については、以下の SMS テキストエンコーディングの節を参照してください）、長いメッセージを分割する必要があります。

長いメッセージの各部分は、個々の SMS です。これらのパーツは、ネットワーク上を単独で移動し、受信側携帯電話によって組み立てられます。再試行と接続の問題を適切に処理するために、Campaign はパーツを逆の順序で送信し、メッセージの最初の部分（最後に送信された部分）でのみ SR を要求します。携帯電話は最初の部分を受け取ったときにのみメッセージを表示するので、追加のパーツでの再試行によって携帯電話で重複が生成されることはありません。

配信テンプレートの「メッセージあたりの最大 SMS 数」設定を使用して、1 回の配信で設定できるメッセージあたりの最大 SMS 数。 この制限を超えると、メッセージが長すぎることが原因で SMS の送信に失敗します。

長い SMS を送信する方法は 2 つあります。

* UDH
* message_payload

UDH は、長いメッセージを送信するためのデフォルトの推奨方法です。 このモードでは、コネクタは、UDH 情報を含む複数の SUBMIT_SM PDU でメッセージを分割します。 このプロトコルは携帯電話自体で使用されるもので、つまり、Campaign はメッセージの生成を最も制御できるので、送信された部分の数と分割方法を正確に計算できます。

*message_payload* は、長いメッセージ全体を 1 つの SUBMIT_SM PDU で送信する方法です。 プロバイダーは分割する必要があります。つまり、Campaign が送信されたパーツの数を正確に把握することは不可能です。 一部のプロバイダーは、このモードを必要とし、UDH をサポートしていない場合にのみ使用します。

プロトコルと形式について詳しくは、前述の SUBMIT_SM PDU の esm_class、short_message および message_payload フィールドの説明を参照してください。

>[!NOTE]
>
>Adobe Campaignでは、送信に UDH と message_payload の両方をサポートしていますが、受信 SMS （MO）では message_payload のみがサポートされています。
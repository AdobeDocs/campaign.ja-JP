---
product: campaign
title: ファイルコレクター
description: ファイルコレクターワークフローアクティビティの詳細を説明します
feature: Workflows, Data Management
exl-id: 614becf7-4cbf-40f9-a1b1-06efa054bfd9
source-git-commit: 77ec01aaba1e50676bed57f503a9e4e8bb1fe54c
workflow-type: tm+mt
source-wordcount: '565'
ht-degree: 100%

---

# ファイルコレクター{#file-collector}



**ファイルコレクター**&#x200B;は、ディレクトリへの 1 つまたは複数のファイルの到着を監視し、それぞれの受信ファイルのトランジションを有効化します。各イベントに関して、変数 **[!UICONTROL filename]** に受信したファイルの完全名が含まれます。収集したファイルは、アーカイブの目的で別のディレクトリに移され、1 回のみとしてカウントされます。

デフォルトで、ファイルコレクターには、スケジュール設定されたタイミングでファイルの有無を調べる永続的なタスクが割り当てられています。

ファイルコレクターが監視するファイルは、このワークフローを担当する wfserver モジュールが実行されるサーバー上に存在する必要があります。1 つのインスタンスに複数の wfserver モジュールがデプロイされている場合は、これらのファイルを使用するアクティビティのアフィニティか、またはワークフローのアフィニティ全体を指定する必要があります。

## プロパティ {#properties}

「**[!UICONTROL ファイルコレクター]**」アクティビティの最初のタブで、ソースディレクトリを選択し、必要に応じて、収集したファイルをフィルターします。他のタブ（「**[!UICONTROL スケジュール]**」タブおよび「**[!UICONTROL 期日]**」タブ）については、[インバウンド E メール](inbound-emails.md)を参照してください。

![](assets/file_collect_edit.png)

1. **ファイルのダウンロード**

   * **[!UICONTROL ディレクトリ]**

     ダウンロードするファイルが含まれているディレクトリ。このディレクトリは、あらかじめサーバー上に作成しておく必要があります。サーバー上に存在しない場合、エラーが発生します。

   * **[!UICONTROL フィルター]**

     このフィルター条件と一致するファイルのみがダウンロードされます。それ以外のディレクトリ内のファイルは無視されます。フィルターを指定しない場合、ディレクトリ内のすべてのファイルがダウンロードの対象となります。フィルターの例：**&#42;.zip**、**import-&#42;.txt**。

   * **[!UICONTROL ファイルが処理されたらすぐに停止します]**

     このオプションを選択すると、最初のファイルを受信した直後にタスクが終了します。フィルターの条件に一致する複数のファイルがディレクトリ内にあっても、ダウンロードされるのは 1 つのファイルのみです。このオプションにより、1 つのイベントのみが送信されます。対象となるファイルは、アルファベット順に並べたリストの先頭に表示されます。

     スケジュール設定されていないアクティビティについては、フィルター条件に一致するファイルが指定ディレクトリになく、かつ「**[!UICONTROL プロセスファイルなし]**」オプションが選択されていない場合、エラーが発生します。

   * **[!UICONTROL 実行スケジュール]**

     「**[!UICONTROL スケジュール]**」タブのパラメーターで、ファイルの有無を確認する頻度を確認します。

1. **エラー処理**

   次の 2 つのオプションを使用できます。

   * **[!UICONTROL プロセスファイルなし]**

     このオプションは、フィルター条件に一致するファイルが指定ディレクトリにないことが検出されると、そのたびに特別なトランジションを開始します。

     タスクがスケジュール設定されていない場合、このトランジションが有効化されるのは 1 回のみです。

   * **[!UICONTROL エラーを処理]**

     このオプションは、エラーが発生したときに有効化される特殊なトランジションを生成します。この場合、ワークフローはエラーステータスに変更されず、実行は継続されます。

     対象となるエラーは、ファイルシステムエラーです（ファイルを移動できない、ディレクトリにアクセスできない、など）。

     このオプションは、無効な値など、アクティビティの設定に関するエラーは処理しません。

1. **履歴化**

   **[!UICONTROL ファイルの履歴化]**&#x200B;の手順について詳しくは、[Web ダウンロード](web-download.md)を参照してください。

ファイルを処理する順番は指定できません。複数のファイルを順番に処理するには、「**[!UICONTROL ファイルが処理されたらすぐに停止します]**」オプションを設定し、反復処理をおこないます。このようにすると、ファイルはアルファベット順に処理されます。「**[!UICONTROL プロセスファイルなし]**」を設定すると、この反復処理を終了できます。

![](assets/file_collect_loop.png)

## 出力パラメーター {#output-parameters}

* ファイル名：ファイル名を入力します。 このファイル名は、履歴化ディレクトに移された後のファイル名です。したがってファイルのパスが変更されますが、履歴化ディレクトに既に同じ名前のファイルが存在していた場合は、ファイル名も変えられます。拡張子は変更されません。

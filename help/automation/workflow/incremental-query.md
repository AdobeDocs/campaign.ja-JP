---
product: campaign
title: 増分処理クエリ
description: 増分処理クエリワークフローアクティビティの詳細を説明します
feature: Workflows, Targeting Activity
exl-id: 3e9f92c3-080f-441b-a15a-2ec9d056d1f9
source-git-commit: 77ec01aaba1e50676bed57f503a9e4e8bb1fe54c
workflow-type: tm+mt
source-wordcount: '379'
ht-degree: 100%

---

# 増分クエリ{#incremental-query}



増分処理クエリは、指標に基づいて定期的にターゲットを選択します。その際、過去にターゲティングされた人を除外します。

ターゲット済みの母集団は、ワークフローインスタンス別およびアクティビティ別にメモリに保存されています。例えば、同じテンプレートから開始される 2 つのワークフローは、同じログを共有しません。一方、同じワークフローインスタンスの同じ増分処理クエリに基づく 2 つのタスクは、同じログを共有します。

増分処理クエリは、標準クエリと同じ方法で定義しますが、実行がスケジュールされる点で異なります。

**関連トピック：**

* [ユースケース：増分処理クエリを使用した四半期ごとのリストの更新](quarterly-list-update.md)
* [クエリの作成](query.md#creating-a-query)

>[!CAUTION]
>
>いずれかの増分処理クエリの実行時の結果が **0** と等しい場合、クエリのプログラムされた次回の実行まで、ワークフローは一時停止します。このため、増分処理クエリに続くトランザクションとアクティビティが、次回の実行前に処理されることはありません。

手順は次のとおりです。

1. 「**[!UICONTROL スケジュール設定と履歴]**」タブで、「**[!UICONTROL 実行をスケジュールする]**」オプションを選択します。一旦作成されたタスクはアクティブなままになり、クエリの実行スケジュールに指定された時間になるとトリガーされます。ただし、このオプションを無効にした場合、**一度に全部**&#x200B;のクエリがただちに実行されます。
1. 「**[!UICONTROL 変更]**」ボタンをクリックします。

   **[!UICONTROL スケジュール編集ウィザード]**&#x200B;ウィンドウで、頻度のタイプと、イベントの繰り返し、イベントの有効期間を設定します。

   ![](assets/s_user_segmentation_wizard_11.png)

1. 「**[!UICONTROL 完了]**」をクリックしてスケジュールを保存します。

   ![](assets/s_user_segmentation_wizard_valid.png)

1. 「**[!UICONTROL スケジュール設定と履歴]**」タブの下部セクションで、履歴として残す日数を選択できます。

   ![](assets/edit_request_inc.png)

   * **[!UICONTROL 履歴（日数）]**

      既にターゲット済みの受信者は、ターゲットされた日から履歴の最大日数に達する日まで、ログに履歴として保持されます。値がゼロの場合、受信者がログからパージされることはありません。

   * **[!UICONTROL 開始時に履歴を保持]**

      アクティビティが有効になったときに、ログがパージされないようにします。

   * **[!UICONTROL SQL テーブル名]**

      このパラメーターは、履歴データを保持するデフォルトの SQL テーブルをオーバーロードします。

## 出力パラメーター {#output-parameters}

* tableName
* schema
* recCount

この 3 つの値セットは、クエリのターゲットとなる母集団を識別します。**[!UICONTROL tableName]** はターゲットの識別子を記録するテーブル名、**[!UICONTROL schema]** は母集団のスキーマ（通常は nms:recipient）、**[!UICONTROL recCount]** はテーブル内の要素の数です。

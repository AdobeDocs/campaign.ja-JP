---
product: campaign
title: データ更新
description: データ更新ワークフローアクティビティの詳細を説明します
feature: Workflows, Targeting Activity, Data Management
source-git-commit: 2b1dec4b9c456df4dfcebfe10d18e0ab01599275
workflow-type: ht
source-wordcount: '0'
ht-degree: 100%

---

# データを更新{#update-data}



**データを更新**&#x200B;タイプのアクティビティは、データベースのフィールドを一括更新します。

## 操作のタイプ {#operation-type}

「**[!UICONTROL 操作のタイプ]**」フィールドで、データベース内のデータに実行する処理を選択します。

* **[!UICONTROL 挿入または更新]**：データを追加するか、既に追加されているデータを更新する場合。
* **[!UICONTROL 挿入]**：データを追加する場合のみ。
* **[!UICONTROL 更新]**：データを更新する場合のみ。
* **[!UICONTROL コレクションを更新して結合]**：データを更新してプライマリレコードを選択した後、このプライマリレコード内の重複レコードに関係付けられた要素にリンクさせる場合。重複レコードは、孤立した接続要素を作成することなく、削除できます。
* **[!UICONTROL 削除]**：データを削除する場合。

![](assets/s_advuser_update_data_1.png)

「**[!UICONTROL バッチサイズ]**」フィールドで、更新するインバウンドトランジション要素の数を選択できます。例えば 500 を選択すると、処理される最初の 500 レコードが更新されます。

## レコード識別 {#record-identification}

データベース内のレコードを識別する方法を指定します。

* データエントリが既存のターゲティングディメンションに関係する場合は、「**[!UICONTROL ターゲティングディメンションを直接使用]**」オプションを選択し、「**[!UICONTROL 更新するディメンション]**」フィールドで、そのターゲティングディメンションを選択します。

   「**[!UICONTROL リンクを編集]**」ボタン（虫眼鏡のアイコン）を使用して、選択したディメンションのフィールドを表示できます。

* または、データベース内のデータの識別または紐付けキーの直接使用を可能にするリンクを 1 つまたは複数指定します。

![](assets/s_advuser_update_data_2.png)

## 更新するフィールドの選択 {#selecting-the-fields-to-be-updated}

「**[!UICONTROL フィールドに同じ名前を自動で関連付け]**」オプションを使用して、更新するフィールドを Adobe Campaign に自動選択させることができます。

![](assets/s_advuser_update_data_3b.png)

また、「**[!UICONTROL 挿入]**」アイコンを使用して、更新するフィールドを手動で選択することもできます。

![](assets/s_advuser_update_data_3.png)

更新するフィールドを選択したら、必要に応じて、更新を実行する条件を追加します。そのためには、「**[!UICONTROL 次の場合に考慮]**」列を使用します。条件は 1 つずつ、リストの順番に適用されます。更新の順番を変更するには、右側の矢印を使用します。

同じ方向のフィールドを何度も使用できます。

「**[!UICONTROL 挿入または更新]**」の処理では、適用されるキャンペーンを、1 つひとつ、またはフィールドごとに選択します。そのためには、必要な値を「**[!UICONTROL 操作]**」列で選択します。

![](assets/s_advuser_update_data_5.png)

**[!UICONTROL modifiedDate]**、**[!UICONTROL modifiedBy]**、**[!UICONTROL createdDate]** および **[!UICONTROL createdBy]** の各フィールドは、フィールド更新テーブルでそれらの管理モードが特に設定されていない限り、データの更新時に自動的に更新されます。

レコードの更新は、異なる値がレコードに少なくとも 1 つ含まれている場合のみ実行されます。すべての値が同じ場合は、更新はおこなわれません。

「**[!UICONTROL 詳細設定パラメーター]**」リンクで、データを更新し、重複データを管理するための追加オプションを指定できます。また以下のオプションも設定できます。

* **[!UICONTROL 自動キー管理を無効にする]**。
* **[!UICONTROL 監査を無効にする]**。
* **[!UICONTROL ソースの値が空（NULL）の場合は宛先の値を空にする]**。このオプションはデフォルトで選択されています。
* **[!UICONTROL 名前が一致する列をすべて更新]**。
* 「**[!UICONTROL 次の場合に有効にする]**」フィールドに式を入力して、ソースの要素を考慮する条件を指定する。
* 式を使用して重複データを考慮する条件を指定する。「**[!UICONTROL 同じターゲットに関係するレコードを無視]**」オプションを選択した場合は、式のリスト内の最初に出現するレコードのみが考慮されます。

**[!UICONTROL アウトバウンドトランジションを生成]**

実行の終了時に有効化される出力トランジションを生成します。通常は、更新によってターゲティングワークフローの終了が示されるので、このオプションはデフォルトでは有効化されません。

**[!UICONTROL リジェクトされた項目のアウトバウンドトランジションを生成]**

更新後、（例えば、重複レコードが存在するなどで）正しく処理されなかったレコードを含むアウトバウンドトランジションを生成します。通常は、更新によってターゲティングワークフローの終了が示されるので、このオプションはデフォルトでは有効化されません。

## コレクションの更新と結合 {#updating-and-merging-collections}

データの更新とコレクションの結合により、1 つまたは複数のセカンダリレコードのデータを使用して、レコード内のデータを更新できます（レコードを 1 つにしておきたい場合）。この更新は、ルールで管理されます。

>[!NOTE]
>
>このオプションで、ワークフローの作業用テーブル（targetWorkflow）、配信（targetDelivery）およびリスト（targetList）からのセカンダリレコードへの参照を処理できます。必要に応じて、これらのリンクは、フィールドとコレクションを選択するリストに表示されます。

1. 「**[!UICONTROL コレクションを更新して結合]**」の処理を選択します。

   ![](assets/update_and_merge_collections1.png)

1. 処理するリンクの優先度を決めます。
これにより、メインレコードを特定できます。処理できるリンクは、インバウンドトラジションによって変わります。

   ![](assets/update_and_merge_collections2.png)

1. プライマリレコードへ移動するコレクションと更新するフィールドを選択します。

   セカンダリレコードが 1 つまたは複数見つかったときに、これらのコレクションおよびフィールドに適用するルールを入力します。そのためには、式ビルダーを使用できます。詳しくは、こちらを参照してください。例えば、すべての異なるレコードの更新値のうち最新のものを必ず保持するように指定します。

   次に、ルールで考慮する条件を入力します。

   最後に、実行する更新のタイプを指定します。例えば、データの更新後に、セカンダリレコードを削除するように選択できます。

   例えば、受信者用の購読リストなど、異種のデータが含まれるコレクションの結合を設定できます。また、ルールを使用して、セカンダリレコードの購読から購読履歴を新しく作成したり、セカンダリレコードからプライマリレコードへ購読リストを移動させることもできます。

1. **[!UICONTROL 詳細設定パラメーター]**／**[!UICONTROL 重複]**&#x200B;を選択し、セカンダリレコードの処理順序を指定します。

   ![](assets/update_and_merge_collections3.png)

定義したルールに該当する場合、セカンダリレコードのデータはメインレコードに関連付けられます。選択した更新のタイプに従って、セカンダリレコードは削除されることもあります。

## 例：エンリッチメント後のデータ更新 {#example--update-data-following-an-enrichment}

要約リスト作成の詳細を説明するユースケースの[手順 2：「購入品」テーブルへのエンリッチメントされたデータの書き込み](create-a-summary-list.md#step-2--writing-enriched-data-to-the--purchases--table)の節では、エンリッチメントアクティビティ後のデータ更新の例を示しています。

## 入力パラメーター {#input-parameters}

* tableName
* schema

各インバウンドイベントは、これらのパラメーターによって定義されるターゲットを指定する必要があります。
